<!doctype html>
<html>
  <head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
    <link rel="shortcut icon" type="image/png" href="https://quantox.com/assets/favicons/favicon-16x16.png"/>
    <title>Qantox test</title> 
    <meta name="description" content="Qantox front-end test"> 
    <meta name="author" content="Milorad Djukovic">
    <!--[if lt IE 9]> <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script><![endif]-->
     <style>
      
      #loading {
		-webkit-animation: rotation 2s infinite linear;
}

#loading2 {
		-webkit-animation: rotation2 2s infinite linear;
}

@-webkit-keyframes rotation {
		from {
				-webkit-transform: rotate(0deg);
		}
		to {
				-webkit-transform: rotate(359deg);
		}
}
@-webkit-keyframes rotation2 {
		from {
				-webkit-transform: rotate(0deg);
		}
		to {
				-webkit-transform: rotate(-359deg);
		}
}      
  </style>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  </head>
  <body id="bodyZ">
      <div id="backgroundDiv" style="width:100vw; height:100vh; background:white; position:absolute; z-index:10; opacity:1; transition:0.33s;"></div>
      <div id="loadingDiv" style="display: block; width: 100px; height: 100px;position:absolute; z-index:11; transition: 0.33s 0.33s; top: 45vh; left: 45vw; opacity: 1; ">
          <img id="loading" src="https://quantox.com/assets/favicons/favicon-32x32.png"  
          style="top:74px;  width: 36px; position: relative; left: 38px; -webkit-animation: rotation 2s infinite cubic-bezier( 1, 0.11, 0.6, 0.45);">
          <i class="fa fa-spinner" id="loading2" aria-hidden="true" style=" font-size: 100px; font-weight: 100; position: relative; left: 8px; color: #96ca3a; "></i>
          </div>
      <div class="mainDiv" id="mainDiv" style="opacity:1; transition:0.66s;">
    <p id="help1" style="display:none;">
    </p>
 
    <div id="results" style="display:none;">
    </div>
  <div style="float:right; height:100%;position:relative; margin-bottom:32px;">
    <div style="width:100%; position:relative; z-index:11;">
        
        <button style="float: right;margin-right: 20px;" id="sortingAsc"> Sort by distance - Asc</button>
        <button style="float: right;margin-right: 20px;" id="sortingDsc"> Sort by distance - Dsc</button>
        
    </div>
  <ol id="resultsList" style=""></ol>
  
  </div>
    <div class="leftDiv"> 
    
        <h3> List of 10 closest "Telenor ATMs"
        </h3> 
        <img id="sirakuza"> 
        <p id="demo">
        </p>
    
    </div>
    
    </div>
  
    

  <script async defer src="https://maps.googleapis.com/maps/api/js?libraries=places,geometry&amp;key=AIzaSyBTmcSBUDmoAwiaFFIbsslB4IGJRruz--U" type="text/javascript"> </script>
  <script type="text/javascript">
var VanillaRunOnDomReady = function() {
var x = document.getElementById("demo");
 getLocation();
 
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else { 
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}
function showPosition(position) {
    x.innerHTML = 'User HTML5 curent: ' + position.coords.latitude + ", " + position.coords.longitude;
    
    var zukorlazovic =document.getElementById("demo").innerHTML;
    var xzt= position.coords.latitude; var xztt = position.coords.longitude;
var request = {
    location: new google.maps.LatLng(xzt,xztt),
    radius: '100000',
	keyword:'telenor atm'
};
var container = document.getElementById('results');
var list = document.getElementById('resultsList');
var service = new google.maps.places.PlacesService(container);
service.nearbySearch(request, callback);
function callback(results, status) {
    
    
    
    if (status == google.maps.places.PlacesServiceStatus.OK) {
    var employees = [];
        for (var i = 0; i < 10; i++) {
         
  
   
    
        var a = new google.maps.LatLng(request.location.lat(),request.location.lng());
        var b = new google.maps.LatLng(results[i].geometry.location.lat(),results[i].geometry.location.lng());
        var distance = google.maps.geometry.spherical.computeDistanceBetween(a,b);
          
            
             employees.push({ 
        "placeName" : results[i].name,
        "placeCoordinates"  : results[i].geometry.location.lat()+', '+results[i].geometry.location.lng(),
        "placeId"       : results[i].id,
        "placeAdress"       : results[i].vicinity,
        "placeDistanceFromUserLocation"       : distance
    });
    
            container.innerHTML += '&markers=icon:http://mile.cloud-industry.com/zz_KS0_icon.ico|' + results[i].geometry.location.lat()+', '+results[i].geometry.location.lng();
             list.innerHTML += '<li> <b> place_name:</b> '+ results[i].name + '</br> <b>place_coordinates:</b>  ' + results[i].geometry.location.lat()+', '+results[i].geometry.location.lng() + " <br> <b>Place_id: </b> " + results[i].id   + '<br> <b>Place_adress: </b>' + results[i].vicinity + '<br> <b>Distance from user location: </b>' +distance+' m' + '<hr> <b>Static map: </b> <img src="https://maps.google.com/maps/api/staticmap?center=' + results[i].geometry.location.lat()+', '+results[i].geometry.location.lng() + '&maptype=roadmap&zoom=14&size=200x200&markers=icon:http://mile.cloud-industry.com/zz_KS0_icon.ico|'+ results[i].geometry.location.lat()+', '+results[i].geometry.location.lng()  +'&key=AIzaSyBTmcSBUDmoAwiaFFIbsslB4IGJRruz--U'  + '"></li><hr>';
            
            }
            document.getElementById('help1').innerHTML=JSON.stringify(employees);
           
		
    }
}
}
}
var alreadyrunflag = 0;
if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", function(){
        alreadyrunflag=1; 
        VanillaRunOnDomReady();
    }, false);
else if (document.all && !window.opera) {
    document.write('<script type="text/javascript" id="contentloadtag" defer="defer" src="javascript:void(0)"><\/script>');
    var contentloadtag = document.getElementById("contentloadtag")
    contentloadtag.onreadystatechange=function(){
        if (this.readyState=="complete"){
            alreadyrunflag=1;
            VanillaRunOnDomReady();
        }
    }
}
window.onload = function(){
  setTimeout("if (!alreadyrunflag){VanillaRunOnDomReady}", 0);
} 
</script>
  
  
  
  
    <script type="text/javascript" src="js/functions4.js"></script>
 <script>
        
      
setTimeout(function(){ document.getElementById('backgroundDiv').style.opacity='0';
document.getElementById('loadingDiv').style.opacity='0';
document.getElementById('mainDiv').style.opacity='1'; }, 3000);





    </script>
  </body>
</html>
